{"ast":null,"code":"import _regeneratorRuntime from\"E:/programing/taskes in corse/react/movie/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"E:/programing/taskes in corse/react/movie/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _objectSpread from\"E:/programing/taskes in corse/react/movie/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"E:/programing/taskes in corse/react/movie/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from'axios';import Joi from'joi';import React,{useState}from'react';import{useNavigate}from'react-router-dom';import{Helmet}from'react-helmet';import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Login(_ref){var _errorList$filter$;var saveUserData=_ref.saveUserData;var navigat=useNavigate();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),errorList=_useState2[0],setErrorList=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isLooding=_useState4[0],setIsLooding=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),erro=_useState6[0],setErro=_useState6[1];var _useState7=useState({email:'',password:''}),_useState8=_slicedToArray(_useState7,2),user=_useState8[0],setUser=_useState8[1];function getUserData(e){var myUser=_objectSpread({},user);myUser[e.target.name]=e.target.value;setUser(myUser);console.log(myUser);};function sendDataToApi(){return _sendDataToApi.apply(this,arguments);}function _sendDataToApi(){_sendDataToApi=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$axios$post,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return axios.post(\"https://sticky-note-fe.vercel.app/signin\",user);case 2:_yield$axios$post=_context.sent;data=_yield$axios$post.data;console.log();if(data.message==='success'){localStorage.setItem('userToken',data.token);saveUserData();setIsLooding(false);navigat('/home');}else{setErro(data.message);setIsLooding(false);}case 6:case\"end\":return _context.stop();}},_callee);}));return _sendDataToApi.apply(this,arguments);}function submitRegister(e){e.preventDefault();var validation=validationRegister();setIsLooding(true);console.log(validation);if(validation.error){setErrorList(validation.error.details);setIsLooding(false);}else{sendDataToApi();}}function validationRegister(){var myObj=Joi.object({email:Joi.string().email({tlds:{allow:['net','com']}}).required(),password:Joi.string().pattern(/^[a-z]{3,5}[@][0-9]{3}$/).required()});return myObj.validate(user,{abortEarly:false});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Helmet,{children:[/*#__PURE__*/_jsx(\"meta\",{charSet:\"utf-8\"}),/*#__PURE__*/_jsx(\"title\",{children:\"NeNex\"}),/*#__PURE__*/_jsx(\"link\",{rel:\"canonical\",href:\"http://mysite.com/example\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\" mt-5\",children:[erro.length>0?/*#__PURE__*/_jsx(\"small\",{className:\"text-danger\",children:erro}):'',/*#__PURE__*/_jsxs(\"form\",{className:\"form\",onSubmit:submitRegister,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email : \"}),/*#__PURE__*/_jsx(\"input\",{onChange:getUserData,type:\"email\",name:\"email\",id:\"email\",className:\"form-control myinput my-2\"}),/*#__PURE__*/_jsx(\"small\",{className:\"text-danger d-block py-2\",children:(_errorList$filter$=errorList.filter(function(error){return error.context.label=='email';})[0])===null||_errorList$filter$===void 0?void 0:_errorList$filter$.message}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{onChange:getUserData,type:\"password\",name:\"password\",id:\"password\",className:\"form-control myinput my-2\"}),errorList.map(function(erro){if(erro.context.label==='password'){return/*#__PURE__*/_jsx(\"small\",{className:\"text-danger d-block py-2\",children:\"Password must start with letter then @ then 3 numbers \"});}}),/*#__PURE__*/_jsx(\"button\",{className:\"register\",type:\"submit\",children:isLooding?/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-spinner fa-spin\"}):'login'})]})]})]});}","map":{"version":3,"names":["axios","Joi","React","useState","useNavigate","Helmet","Login","saveUserData","navigat","errorList","setErrorList","isLooding","setIsLooding","erro","setErro","email","password","user","setUser","getUserData","e","myUser","target","name","value","console","log","sendDataToApi","post","data","message","localStorage","setItem","token","submitRegister","preventDefault","validation","validationRegister","error","details","myObj","object","string","tlds","allow","required","pattern","validate","abortEarly","length","filter","context","label","map"],"sources":["E:/programing/taskes in corse/react/movie/src/Component/Login/Login.jsx"],"sourcesContent":["import axios from 'axios';\r\nimport Joi from 'joi';\r\nimport React, { useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { Helmet } from 'react-helmet';\r\n\r\nexport default function Login({saveUserData}) {\r\n    let navigat = useNavigate();\r\n    const [errorList, setErrorList] = useState([])\r\n    const [isLooding, setIsLooding] = useState(false);\r\n      const [erro, setErro] = useState('');\r\n      const [user, setUser] = useState({\r\n          \r\n          email:'',\r\n          password:'',\r\n      });\r\n  \r\n      function getUserData(e){\r\n          let myUser ={...user};\r\n          myUser[e.target.name]= e.target.value;\r\n          setUser(myUser);\r\n          console.log(myUser);\r\n  \r\n      };\r\n  \r\n      async function sendDataToApi(){\r\n          let {data} = await axios.post(`https://sticky-note-fe.vercel.app/signin`, user);\r\n          console.log()\r\n         if(data.message === 'success'){\r\n          localStorage.setItem('userToken',data.token);\r\n          saveUserData()\r\n            setIsLooding(false);\r\n            navigat('/home')\r\n         }\r\n         else{\r\n            setErro(data.message);\r\n            setIsLooding(false)\r\n         }\r\n      }\r\n  \r\n      function submitRegister(e){\r\n       \r\n          e.preventDefault();\r\n         \r\n          let validation = validationRegister();\r\n          setIsLooding(true);\r\n          console.log(validation);\r\n          \r\n           if(validation.error){\r\n            setErrorList(validation.error.details)\r\n            setIsLooding(false);\r\n           }\r\n           else\r\n           {\r\n              sendDataToApi();\r\n              \r\n             \r\n  \r\n           }\r\n  \r\n      }\r\n  \r\n      function validationRegister(){\r\n        let myObj = Joi.object({\r\n       \r\n          email:Joi.string().email({tlds:{allow:['net','com']}}).required(),\r\n          password:Joi.string().pattern(/^[a-z]{3,5}[@][0-9]{3}$/).required(),\r\n  \r\n        });\r\n        return myObj.validate(user ,{abortEarly:false});\r\n        \r\n      }\r\n  \r\n    return <>\r\n    <Helmet>\r\n                  <meta charSet=\"utf-8\" />\r\n                  <title>NeNex</title>\r\n                  <link rel=\"canonical\" href=\"http://mysite.com/example\" />\r\n              </Helmet>\r\n    <div className=\" mt-5\">\r\n      {erro.length > 0 ?<small className='text-danger'>{erro}</small>:''}\r\n      \r\n      <form className=\"form\" onSubmit={submitRegister} >\r\n        \r\n        <label htmlFor=\"email\">Email : </label>\r\n        <input onChange={getUserData} type=\"email\" name='email'  id='email' className='form-control myinput my-2'/>\r\n        <small className='text-danger d-block py-2'>\r\n          {errorList.filter((error)=> error.context.label == 'email')[0]?.message}\r\n        </small>\r\n        <label htmlFor=\"password\">Password</label>\r\n        <input onChange={getUserData} type=\"password\" name='password'  id='password' className='form-control myinput my-2'/>\r\n        \r\n          {errorList.map((erro)=>{\r\n            if (erro.context.label === 'password'){\r\n              return <small className='text-danger d-block py-2'>Password must start with letter then @ then 3 numbers </small>\r\n            }\r\n          })} \r\n       \r\n      <button className='register' type='submit'>\r\n        {isLooding?<i className='fas fa-spinner fa-spin'></i>:'login'}\r\n        </button>\r\n      </form>\r\n    </div>\r\n    </>\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}