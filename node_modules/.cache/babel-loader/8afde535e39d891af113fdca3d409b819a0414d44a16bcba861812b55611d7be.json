{"ast":null,"code":"import _regeneratorRuntime from\"E:/programing/taskes in corse/react/movie/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"E:/programing/taskes in corse/react/movie/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _objectSpread from\"E:/programing/taskes in corse/react/movie/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"E:/programing/taskes in corse/react/movie/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from'axios';import Joi from'joi';import React,{useState}from'react';import{useNavigate}from'react-router-dom';import{Helmet}from'react-helmet';import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Register(){var _errorList$filter$,_errorList$filter$2,_errorList$filter$3,_errorList$filter$4;var navigat=useNavigate();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),errorList=_useState2[0],setErrorList=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isLooding=_useState4[0],setIsLooding=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),erro=_useState6[0],setErro=_useState6[1];var _useState7=useState({first_name:'',last_name:'',age:0,email:'',password:''}),_useState8=_slicedToArray(_useState7,2),user=_useState8[0],setUser=_useState8[1];function getUserData(e){var myUser=_objectSpread({},user);myUser[e.target.name]=e.target.value;setUser(myUser);console.log(myUser);};function sendDataToApi(){return _sendDataToApi.apply(this,arguments);}function _sendDataToApi(){_sendDataToApi=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$axios$post,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return axios.post('https://movies-api.routemisr.com/signup',user);case 2:_yield$axios$post=_context.sent;data=_yield$axios$post.data;if(data.message==='success'){setIsLooding(false);navigat('/login');}else{setErro(data.message);setIsLooding(false);}case 5:case\"end\":return _context.stop();}},_callee);}));return _sendDataToApi.apply(this,arguments);}function submitRegister(e){e.preventDefault();var validation=validationRegister();setIsLooding(true);console.log(validation);if(validation.error){setErrorList(validation.error.details);setIsLooding(false);}else{sendDataToApi();}}function validationRegister(){var myObj=Joi.object({first_name:Joi.string().min(3).max(10).required(),last_name:Joi.string().min(3).max(10).required(),age:Joi.number().min(16).max(60).required(),email:Joi.string().email({tlds:{allow:['net','com']}}).required(),password:Joi.string().pattern(/^[a-z]{3,5}[@][0-9]{3}$/).required()});return myObj.validate(user,{abortEarly:false});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Helmet,{children:[/*#__PURE__*/_jsx(\"meta\",{charSet:\"utf-8\"}),/*#__PURE__*/_jsx(\"title\",{children:\"NeNex\"}),/*#__PURE__*/_jsx(\"link\",{rel:\"canonical\",href:\"http://mysite.com/example\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\" mt-5\",children:[erro.length>0?/*#__PURE__*/_jsx(\"small\",{className:\"text-danger\",children:erro}):'',/*#__PURE__*/_jsxs(\"form\",{className:\"form\",onSubmit:submitRegister,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"first_name\",children:\"Frist Name :\"}),/*#__PURE__*/_jsx(\"input\",{onChange:getUserData,type:\"text\",name:\"first_name\",id:\"first_name\",className:\"form-control myinput my-2\"}),/*#__PURE__*/_jsx(\"small\",{className:\"text-danger d-block py-2\",children:(_errorList$filter$=errorList.filter(function(error){return error.context.label==='first_name';})[0])===null||_errorList$filter$===void 0?void 0:_errorList$filter$.message}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"last_name\",children:\"Last Name :\"}),/*#__PURE__*/_jsx(\"input\",{onChange:getUserData,type:\"text\",name:\"last_name\",id:\"last_name\",className:\"form-control myinput my-2\"}),/*#__PURE__*/_jsx(\"small\",{className:\"text-danger d-block py-2\",children:(_errorList$filter$2=errorList.filter(function(error){return error.context.label==='last_name';})[0])===null||_errorList$filter$2===void 0?void 0:_errorList$filter$2.message}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"age\",children:\"Age :\"}),/*#__PURE__*/_jsx(\"input\",{onChange:getUserData,type:\"number\",name:\"age\",id:\"age\",className:\"form-control myinput my-2 \"}),/*#__PURE__*/_jsx(\"small\",{className:\"text-danger d-block py-2\",children:(_errorList$filter$3=errorList.filter(function(error){return error.context.label==='age';})[0])===null||_errorList$filter$3===void 0?void 0:_errorList$filter$3.message}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email : \"}),/*#__PURE__*/_jsx(\"input\",{onChange:getUserData,type:\"email\",name:\"email\",id:\"email\",className:\"form-control myinput my-2\"}),/*#__PURE__*/_jsx(\"small\",{className:\"text-danger d-block py-2\",children:(_errorList$filter$4=errorList.filter(function(error){return error.context.label==='email';})[0])===null||_errorList$filter$4===void 0?void 0:_errorList$filter$4.message}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{onChange:getUserData,type:\"password\",name:\"password\",id:\"password\",className:\"form-control myinput my-2\"}),errorList.map(function(erro){if(erro.context.label==='password'){return/*#__PURE__*/_jsx(\"small\",{className:\"text-danger d-block py-2\",children:\"Password must start with letter then @ then 3 numbers \"});}}),/*#__PURE__*/_jsx(\"button\",{className:\"register\",type:\"submit\",children:isLooding?/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-spinner fa-spin\"}):'Register'})]})]})]});}","map":{"version":3,"names":["axios","Joi","React","useState","useNavigate","Helmet","Register","navigat","errorList","setErrorList","isLooding","setIsLooding","erro","setErro","first_name","last_name","age","email","password","user","setUser","getUserData","e","myUser","target","name","value","console","log","sendDataToApi","post","data","message","submitRegister","preventDefault","validation","validationRegister","error","details","myObj","object","string","min","max","required","number","tlds","allow","pattern","validate","abortEarly","length","filter","context","label","map"],"sources":["E:/programing/taskes in corse/react/movie/src/Component/Register/Register.jsx"],"sourcesContent":["import axios from 'axios';\r\nimport Joi from 'joi';\r\nimport React, { useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { Helmet } from 'react-helmet';\r\n\r\nexport default function Register() {\r\n    let navigat = useNavigate();\r\n    const [errorList, setErrorList] = useState([])\r\n    const [isLooding, setIsLooding] = useState(false);\r\n      const [erro, setErro] = useState('');\r\n      const [user, setUser] = useState({\r\n          first_name:'',\r\n          last_name:'',\r\n          age:0,\r\n          email:'',\r\n          password:'',\r\n      });\r\n  \r\n      function getUserData(e){\r\n          let myUser ={...user};\r\n          myUser[e.target.name]= e.target.value;\r\n          setUser(myUser);\r\n          console.log(myUser);\r\n  \r\n      };\r\n  \r\n      async function sendDataToApi(){\r\n          let {data} = await axios.post('https://movies-api.routemisr.com/signup', user);\r\n         if(data.message === 'success'){\r\n            setIsLooding(false);\r\n            navigat('/login')\r\n         }\r\n         else{\r\n            setErro(data.message);\r\n            setIsLooding(false)\r\n         }\r\n      }\r\n  \r\n      function submitRegister(e){\r\n       \r\n          e.preventDefault();\r\n         \r\n          let validation = validationRegister();\r\n          setIsLooding(true);\r\n          console.log(validation);\r\n          \r\n           if(validation.error){\r\n            setErrorList(validation.error.details)\r\n            setIsLooding(false);\r\n           }\r\n           else\r\n           {\r\n              sendDataToApi();\r\n              \r\n             \r\n  \r\n           }\r\n  \r\n      }\r\n  \r\n      function validationRegister(){\r\n        let myObj = Joi.object({\r\n          first_name:Joi.string().min(3).max(10).required(),\r\n          last_name:Joi.string().min(3).max(10).required(),\r\n          age:Joi.number().min(16).max(60).required(),\r\n          email:Joi.string().email({tlds:{allow:['net','com']}}).required(),\r\n          password:Joi.string().pattern(/^[a-z]{3,5}[@][0-9]{3}$/).required(),\r\n  \r\n        });\r\n        return myObj.validate(user ,{abortEarly:false});\r\n        \r\n      }\r\n  \r\n    return <>\r\n    <Helmet>\r\n                  <meta charSet=\"utf-8\" />\r\n                  <title>NeNex</title>\r\n                  <link rel=\"canonical\" href=\"http://mysite.com/example\" />\r\n              </Helmet>\r\n    <div className=\" mt-5\">\r\n      {erro.length > 0 ?<small className='text-danger'>{erro}</small>:''}\r\n      \r\n      <form className=\"form\" onSubmit={submitRegister} >\r\n        <label htmlFor=\"first_name\">Frist Name :</label>\r\n        <input onChange={getUserData} type=\"text\" name='first_name'  id='first_name' className='form-control myinput my-2'/>\r\n        <small className='text-danger d-block py-2'>\r\n          {errorList.filter((error)=> error.context.label === 'first_name')[0]?.message}\r\n        </small>\r\n        \r\n        <label htmlFor=\"last_name\">Last Name :</label>\r\n        <input onChange={getUserData} type=\"text\" name='last_name'  id='last_name' className='form-control myinput my-2'/>\r\n        <small className='text-danger d-block py-2'>\r\n          {errorList.filter((error)=> error.context.label === 'last_name')[0]?.message}\r\n        </small>\r\n        <label htmlFor=\"age\">Age :</label>\r\n        <input onChange={getUserData} type=\"number\" name='age'  id='age' className='form-control myinput my-2 '/>\r\n        <small className='text-danger d-block py-2'>\r\n          {errorList.filter((error)=> error.context.label === 'age')[0]?.message}\r\n        </small>\r\n        <label htmlFor=\"email\">Email : </label>\r\n        <input onChange={getUserData} type=\"email\" name='email'  id='email' className='form-control myinput my-2'/>\r\n        <small className='text-danger d-block py-2'>\r\n          {errorList.filter((error)=> error.context.label === 'email')[0]?.message}\r\n        </small>\r\n        <label htmlFor=\"password\">Password</label>\r\n        <input onChange={getUserData} type=\"password\" name='password'  id='password' className='form-control myinput my-2'/>\r\n        \r\n          {errorList.map((erro)=>{\r\n            if (erro.context.label === 'password'){\r\n              return <small className='text-danger d-block py-2'>Password must start with letter then @ then 3 numbers </small>\r\n            }\r\n          })} \r\n       \r\n      <button className='register' type='submit'>\r\n        {isLooding?<i className='fas fa-spinner fa-spin'></i>:'Register'}\r\n        </button>\r\n      </form>\r\n    </div>\r\n    </>\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}