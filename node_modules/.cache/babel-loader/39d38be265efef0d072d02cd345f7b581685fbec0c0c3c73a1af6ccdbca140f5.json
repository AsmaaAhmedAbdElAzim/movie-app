{"ast":null,"code":"var _jsxFileName = \"E:\\\\programing\\\\taskes in corse\\\\react\\\\movie\\\\src\\\\Component\\\\Login\\\\Login.jsx\",\n  _s = $RefreshSig$();\nimport axios from 'axios';\nimport Joi from 'joi';\nimport React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { Helmet } from 'react-helmet';\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Login(_ref) {\n  _s();\n  var _errorList$filter$;\n  let {\n    saveUserData\n  } = _ref;\n  let navigat = useNavigate();\n  const [errorList, setErrorList] = useState([]);\n  const [isLooding, setIsLooding] = useState(false);\n  const [erro, setErro] = useState('');\n  const [user, setUser] = useState({\n    email: '',\n    password: ''\n  });\n  function getUserData(e) {\n    let myUser = {\n      ...user\n    };\n    myUser[e.target.name] = e.target.value;\n    setUser(myUser);\n    console.log(myUser);\n  }\n  ;\n  async function sendDataToApi() {\n    let {\n      data\n    } = await axios.post(`https://movies-api.routemisr.com/signin`, user);\n    console.log();\n    if (data.message === 'success') {\n      localStorage.setItem('userToken', data.token);\n      saveUserData();\n      setIsLooding(false);\n      navigat('/home');\n    } else {\n      setErro(data.message);\n      setIsLooding(false);\n    }\n  }\n  function submitRegister(e) {\n    e.preventDefault();\n    let validation = validationRegister();\n    setIsLooding(true);\n    console.log(validation);\n    if (validation.error) {\n      setErrorList(validation.error.details);\n      setIsLooding(false);\n    } else {\n      sendDataToApi();\n    }\n  }\n  function validationRegister() {\n    let myObj = Joi.object({\n      email: Joi.string().email({\n        tlds: {\n          allow: ['net', 'com']\n        }\n      }).required(),\n      password: Joi.string().pattern(/^[a-z]{3,5}[@][0-9]{3}$/).required()\n    });\n    return myObj.validate(user, {\n      abortEarly: false\n    });\n  }\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Helmet, {\n      children: [/*#__PURE__*/_jsxDEV(\"meta\", {\n        charSet: \"utf-8\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 19\n      }, this), /*#__PURE__*/_jsxDEV(\"title\", {\n        children: \"NeNex\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 19\n      }, this), /*#__PURE__*/_jsxDEV(\"link\", {\n        rel: \"canonical\",\n        href: \"http://mysite.com/example\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 19\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \" mt-5\",\n      children: [erro.length > 0 ? /*#__PURE__*/_jsxDEV(\"small\", {\n        className: \"text-danger\",\n        children: erro\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 25\n      }, this) : '', /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"form\",\n        onSubmit: submitRegister,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"email\",\n          children: \"Email : \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          onChange: getUserData,\n          type: \"email\",\n          name: \"email\",\n          id: \"email\",\n          className: \"form-control myinput my-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n          className: \"text-danger d-block py-2\",\n          children: (_errorList$filter$ = errorList.filter(error => error.context.label == 'email')[0]) === null || _errorList$filter$ === void 0 ? void 0 : _errorList$filter$.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"password\",\n          children: \"Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          onChange: getUserData,\n          type: \"password\",\n          name: \"password\",\n          id: \"password\",\n          className: \"form-control myinput my-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 9\n        }, this), errorList.map(erro => {\n          if (erro.context.label === 'password') {\n            return /*#__PURE__*/_jsxDEV(\"small\", {\n              className: \"text-danger d-block py-2\",\n              children: \"Password must start with letter then @ then 3 numbers \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 22\n            }, this);\n          }\n        }), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"register\",\n          type: \"submit\",\n          children: isLooding ? /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-spinner fa-spin\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 20\n          }, this) : 'login'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true);\n}\n_s(Login, \"rXRekJIBmrJzzhJDizLg+jz1Dgg=\", false, function () {\n  return [useNavigate];\n});\n_c = Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["axios","Joi","React","useState","useNavigate","Helmet","Login","saveUserData","navigat","errorList","setErrorList","isLooding","setIsLooding","erro","setErro","user","setUser","email","password","getUserData","e","myUser","target","name","value","console","log","sendDataToApi","data","post","message","localStorage","setItem","token","submitRegister","preventDefault","validation","validationRegister","error","details","myObj","object","string","tlds","allow","required","pattern","validate","abortEarly","length","filter","context","label","map"],"sources":["E:/programing/taskes in corse/react/movie/src/Component/Login/Login.jsx"],"sourcesContent":["import axios from 'axios';\r\nimport Joi from 'joi';\r\nimport React, { useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { Helmet } from 'react-helmet';\r\n\r\nexport default function Login({saveUserData}) {\r\n    let navigat = useNavigate();\r\n    const [errorList, setErrorList] = useState([])\r\n    const [isLooding, setIsLooding] = useState(false);\r\n      const [erro, setErro] = useState('');\r\n      const [user, setUser] = useState({\r\n          \r\n          email:'',\r\n          password:'',\r\n      });\r\n  \r\n      function getUserData(e){\r\n          let myUser ={...user};\r\n          myUser[e.target.name]= e.target.value;\r\n          setUser(myUser);\r\n          console.log(myUser);\r\n  \r\n      };\r\n  \r\n      async function sendDataToApi(){\r\n          let {data} = await axios.post(`https://movies-api.routemisr.com/signin`, user);\r\n          console.log()\r\n         if(data.message === 'success'){\r\n          localStorage.setItem('userToken',data.token);\r\n          saveUserData()\r\n            setIsLooding(false);\r\n            navigat('/home')\r\n         }\r\n         else{\r\n            setErro(data.message);\r\n            setIsLooding(false)\r\n         }\r\n      }\r\n  \r\n      function submitRegister(e){\r\n       \r\n          e.preventDefault();\r\n         \r\n          let validation = validationRegister();\r\n          setIsLooding(true);\r\n          console.log(validation);\r\n          \r\n           if(validation.error){\r\n            setErrorList(validation.error.details)\r\n            setIsLooding(false);\r\n           }\r\n           else\r\n           {\r\n              sendDataToApi();\r\n              \r\n             \r\n  \r\n           }\r\n  \r\n      }\r\n  \r\n      function validationRegister(){\r\n        let myObj = Joi.object({\r\n       \r\n          email:Joi.string().email({tlds:{allow:['net','com']}}).required(),\r\n          password:Joi.string().pattern(/^[a-z]{3,5}[@][0-9]{3}$/).required(),\r\n  \r\n        });\r\n        return myObj.validate(user ,{abortEarly:false});\r\n        \r\n      }\r\n  \r\n    return <>\r\n    <Helmet>\r\n                  <meta charSet=\"utf-8\" />\r\n                  <title>NeNex</title>\r\n                  <link rel=\"canonical\" href=\"http://mysite.com/example\" />\r\n              </Helmet>\r\n    <div className=\" mt-5\">\r\n      {erro.length > 0 ?<small className='text-danger'>{erro}</small>:''}\r\n      \r\n      <form className=\"form\" onSubmit={submitRegister} >\r\n        \r\n        <label htmlFor=\"email\">Email : </label>\r\n        <input onChange={getUserData} type=\"email\" name='email'  id='email' className='form-control myinput my-2'/>\r\n        <small className='text-danger d-block py-2'>\r\n          {errorList.filter((error)=> error.context.label == 'email')[0]?.message}\r\n        </small>\r\n        <label htmlFor=\"password\">Password</label>\r\n        <input onChange={getUserData} type=\"password\" name='password'  id='password' className='form-control myinput my-2'/>\r\n        \r\n          {errorList.map((erro)=>{\r\n            if (erro.context.label === 'password'){\r\n              return <small className='text-danger d-block py-2'>Password must start with letter then @ then 3 numbers </small>\r\n            }\r\n          })} \r\n       \r\n      <button className='register' type='submit'>\r\n        {isLooding?<i className='fas fa-spinner fa-spin'></i>:'login'}\r\n        </button>\r\n      </form>\r\n    </div>\r\n    </>\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}